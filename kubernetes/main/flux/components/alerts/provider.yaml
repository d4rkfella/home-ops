---
# yaml-language-server: $schema=https://kubernetes-schemas.pages.dev/notification.toolkit.fluxcd.io/provider_v1beta3.json
apiVersion: notification.toolkit.fluxcd.io/v1beta3
kind: Provider
metadata:
  name: alert-manager
spec:
  type: alertmanager
  address: https://alertmanager-operated.observability.svc.cluster.local:8082/api/v2/alerts/
  certSecretRef:
    name: darkfellanet-ca
---
# yaml-language-server: $schema=https://kubernetes-schemas.pages.dev/external-secrets.io/externalsecret_v1beta1.json
apiVersion: external-secrets.io/v1beta1
kind: ExternalSecret
metadata:
  name: darkfellanet-ca
  namespace: network
spec:
  secretStoreRef:
    kind: ClusterSecretStore
    name: vault-backend
  target:
    name: darkfellanet-ca
  dataFrom:
    - extract:
        key: secrets/certificates/darkfellanet-internal
